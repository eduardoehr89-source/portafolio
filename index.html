<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAID HERRERA // PORTFOLIO</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #0b1016; --bg-panel: #151b26; --accent-cyan: #22d3ee;
            --text-main: #f1f5f9; --text-muted: #94a3b8; --radius-box: 12px;
        }

        body {
            background-color: var(--bg-dark); color: var(--text-main); font-family: 'Inter', sans-serif;
            background-image: linear-gradient(rgba(34, 211, 238, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(34, 211, 238, 0.02) 1px, transparent 1px);
            background-size: 40px 40px; scroll-behavior: smooth;
        }

        .font-tech { font-family: 'JetBrains Mono', monospace; }

        .section-desc {
            font-size: 0.85rem; color: var(--text-muted); margin-top: -1rem; margin-bottom: 2rem;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            border-left: 2px solid var(--accent-cyan); padding-left: 1rem;
        }

        .tech-card { background-color: rgba(21, 27, 38, 0.85); border: 1px solid rgba(34, 211, 238, 0.15); border-radius: var(--radius-box); backdrop-filter: blur(8px); }

        .btn-tech-outline { background: transparent; border: 1px solid rgba(34, 211, 238, 0.15); color: var(--text-muted); font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; transition: 0.2s; cursor: pointer; }
        .btn-tech-outline.active { border-color: var(--accent-cyan); background-color: var(--accent-cyan) !important; color: #0b1016 !important; font-weight: 700; box-shadow: 0 0 15px rgba(34, 211, 238, 0.3); }

        .tech-table-grid { display: grid; grid-template-columns: 50px 15% 20% 8% 10% 12% 1fr; gap: 1rem; align-items: start; }
        .tech-list-row { padding: 0.75rem 0.5rem; border-bottom: 1px solid rgba(34, 211, 238, 0.1); cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; }
        .tech-list-row:hover { background: rgba(34, 211, 238, 0.05); border-left: 2px solid var(--accent-cyan); }

        .field-label { font-family: 'JetBrains Mono', monospace; color: var(--accent-cyan); font-size: 0.65rem; text-transform: uppercase; margin-bottom: 2px; display: block; }
        .field-value { font-family: 'JetBrains Mono', monospace; color: var(--text-muted); font-size: 0.8rem; line-height: 1.4; }

        .gallery-card { height: 240px; background-color: #1e293b; border-radius: 12px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(34, 211, 238, 0.1); }
        .gallery-overlay { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); padding: 1.5rem 1rem 1rem; }
        .gallery-id { font-family: 'JetBrains Mono', monospace; color: #FFFFFF; font-size: 0.65rem; font-weight: 700; margin-bottom: 4px; display: block; }
        .gallery-title { font-family: 'Inter', sans-serif; font-weight: 800; color: #FFFFFF; font-size: 1.1rem; line-height: 1.2; }
        .gallery-loc { font-family: 'JetBrains Mono', monospace; color: #FFFFFF; font-size: 0.7rem; margin-top: 4px; display: block; opacity: 0.9; }

        #status-bar-container { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: var(--text-muted); text-align: right; }

        .dock-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(21, 27, 38, 0.9); border: 1px solid rgba(34, 211, 238, 0.15); padding: 8px 16px; border-radius: 12px; display: flex; gap: 12px; z-index: 50; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .dock-item { color: var(--text-muted); font-size: 0.6rem; font-family: 'JetBrains Mono', monospace; display: flex; flex-direction: column; align-items: center; cursor: pointer; text-decoration: none;}
        .highlight-cv { color: var(--accent-cyan) !important; font-weight: 800; }
        
        /* Map Tooltip */
        #map-tooltip { position: fixed; top: 0; left: 0; z-index: 9999; pointer-events: auto; opacity: 0; visibility: hidden; transition: opacity 0.15s ease, visibility 0.15s ease; background: var(--bg-panel); backdrop-filter: blur(12px); border: 1px solid var(--border-color); color: var(--text-main); padding: 0; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); width: auto; max-width: 90vw; }
        .tooltip-header { font-weight: 800; font-size: 0.75rem; background: rgba(34, 211, 238, 0.05); border-bottom: 1px solid var(--border-color); padding: 8px 12px; text-transform: uppercase; font-family: 'JetBrains Mono', monospace; display: flex; justify-content: space-between; align-items: center; }
        .tooltip-content { padding: 4px; display: grid; grid-template-columns: 1fr; gap: 0; }
        .tooltip-row { display: grid; grid-template-columns: 40px 1fr; gap: 12px; padding: 6px 12px; cursor: pointer; transition: background 0.2s; align-items: center; border-bottom: 1px solid transparent; }
        .tooltip-row:hover { background: rgba(125,125,125,0.05); }
        .tooltip-pid { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; font-weight: 700; }
        .tooltip-info { display: flex; flex-direction: column; line-height: 1.2; }
        .tooltip-name { font-size: 0.75rem; font-weight: 600; color: var(--text-main); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    </style>
</head>
<body>

    <main class="max-w-7xl mx-auto px-4 md:px-8 pt-12 pb-24">
        <div class="tech-card p-8 md:p-12 mb-20 flex flex-col md:flex-row justify-between items-start md:items-center">
            <div>
                <span class="font-tech text-xs text-cyan-400">PORTFOLIO V.2025</span>
                <h1 class="text-6xl md:text-8xl font-black text-white leading-none tracking-tight mb-2">SAID<br><span class="text-cyan-400">HERRERA</span></h1>
                <p class="text-xl text-gray-400 max-w-xl mt-4 border-l-2 border-cyan-900 pl-4">Modelador BIM Senior especializado en gestión de datos 6D y automatización.</p>
            </div>
            <div class="flex flex-col gap-4 mt-8 md:mt-0">
                <div class="hero-stat-box"><span class="hero-stat-num" id="hero-stat-projects">0</span><span class="hero-stat-label">Proyectos</span></div>
                <div class="hero-stat-box"><span class="hero-stat-num text-cyan-400">10+</span><span class="hero-stat-label">Años Exp.</span></div>
            </div>
        </div>

        <section id="analisis" class="mb-24 scroll-mt-24">
             <div class="section-header"><i data-lucide="globe"></i><h2 class="font-tech text-xl text-cyan-400">01_GEO_DATA</h2></div>
             <p class="section-desc">Visualización global interactiva.</p>
             <div class="map-wrapper relative">
                <div id="d3-map-svg-container" class="w-full h-full"><svg id="map-svg"></svg></div>
            </div>
        </section>

        <section id="proyectos" class="mb-24 scroll-mt-24">
            <div class="section-header justify-between">
                <div class="flex items-center gap-2"><i data-lucide="folder-open"></i><h2 class="font-tech text-xl text-cyan-400">04_PROJECT_DB</h2></div>
                <div class="controls-bar flex gap-2">
                    <button id="btn-top5" class="btn-tech-outline px-4 py-1 rounded active" onclick="toggleTop5()">TOP 5</button>
                    <div class="flex bg-black/20 rounded p-1 gap-1">
                        <button class="p-1 view-btn" onclick="setProjectView('list')"><i data-lucide="list" class="w-4 h-4"></i></button>
                        <button class="p-1 view-btn active" onclick="setProjectView('gallery')"><i data-lucide="layout-grid" class="w-4 h-4"></i></button>
                        <button class="p-1 view-btn" onclick="setProjectView('carousel')"><i data-lucide="rectangle-horizontal" class="w-4 h-4"></i></button>
                    </div>
                </div>
            </div>

            <div class="flex justify-between items-center mb-6 pl-3 border-l border-cyan-900">
                <p style="font-size:0.85rem; color:var(--text-muted)">Base de datos técnica con filtros dinámicos y fichas de proyectos.</p>
                <div id="status-bar-container"></div>
            </div>

            <div id="list-view-wrapper" class="hidden w-full overflow-x-auto tech-card">
                <div class="tech-table-grid p-4 text-cyan-400 border-b border-gray-800 font-tech text-xs">
                    <span>ID</span><span>PROYECTO</span><span>DESC. TÉCNICA</span><span>FASE</span><span>TIPO</span><span>DISCIPLINA</span><span>STACK</span>
                </div>
                <div id="proyectos-list-container"></div>
            </div>

            <div id="carousel-view-wrapper" class="hidden">
                <div class="project-card-tech tech-card"><div class="p-info-side" id="carousel-info-content"></div><div class="p-img-side bg-gray-900"></div></div>
            </div>

            <div id="gallery-view-wrapper" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
        </section>

        <section id="software" class="mb-24 scroll-mt-24">
            <div class="section-header"><i data-lucide="cpu"></i><h2 class="font-tech text-xl text-cyan-400">05_STACK</h2></div>
            <p class="section-desc">Ecosistema digital. Integro Gemini AI para mejorar mi flujo de trabajo global.</p>
            <div id="software-list" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="tech-card p-4 text-center"><i data-lucide="sparkles" class="text-cyan-400 mx-auto mb-2"></i><h4 class="font-bold text-sm">Gemini AI</h4></div>
                <div class="tech-card p-4 text-center"><i data-lucide="layers" class="text-cyan-400 mx-auto mb-2"></i><h4 class="font-bold text-sm">Revit</h4></div>
                <div class="tech-card p-4 text-center"><i data-lucide="crosshair" class="text-cyan-400 mx-auto mb-2"></i><h4 class="font-bold text-sm">Navisworks</h4></div>
                <div class="tech-card p-4 text-center"><i data-lucide="code" class="text-cyan-400 mx-auto mb-2"></i><h4 class="font-bold text-sm">Dynamo</h4></div>
            </div>
        </section>
    </main>

    <footer class="text-center py-12 border-t border-gray-800">
        <p class="font-tech text-xs text-gray-600">POWERED BY <span class="text-cyan-600 font-bold">GEMINI PRO</span> & <span class="text-cyan-600 font-bold">ANTIGRAVITY</span></p>
    </footer>

    <nav class="dock-nav">
        <a href="#proyectos" class="dock-item">PROJ</a>
        <a href="#software" class="dock-item">STACK</a>
        <div class="w-px h-6 bg-gray-800 mx-1"></div>
        <a href="#" class="dock-item highlight-cv"><i data-lucide="file-text" class="w-4 h-4 mb-1"></i>CV</a>
    </nav>
    
    <div id="map-tooltip"></div>

    <script>
        const stdSoftware = "AutoCAD, Revit, Navisworks, BIM 360";
        
        // --- BASE DE DATOS AJUSTADA A TUS CARPETAS EXACTAS ---
        const projectsDB = {
            // ¡ESTOS NOMBRES DEBEN SER EXACTOS A TUS CARPETAS!
            P03: { name: "Barrio Santa Lucía", year: "2024", fase: "Oficina", tipologia: "VIVIENDA", disciplinas: "Arquitectura", desafio: "Coordinación de acabados.", software: stdSoftware, ubicacion: "Monterrey, N.L.", isTop:true, coords: [-100.31, 25.68] },
            P15: { name: "Aldaba", year: "2024", fase: "Obra", tipologia: "VIVIENDA", disciplinas: "Arquitectura", desafio: "Documentación ejecutiva.", software: stdSoftware, ubicacion: "León, Gto.", isTop:true, coords: [-101.68, 21.12] },
            P16: { name: "Aulas X", year: "2025", fase: "Oficina", tipologia: "EDUCACIÓN", disciplinas: "Estructura", desafio: "Modelado estructural.", software: stdSoftware, ubicacion: "Monterrey, N.L.", isTop:true, coords: [-100.31, 25.68] },
            
            // RESTO (Sin carpeta aun, se veran gris)
            P30: { name: "Estadio BBVA", year: "2014", fase: "Obra", tipologia: "OTROS", disciplinas: "Estructura", desafio: "Levantamiento geométrico...", software: stdSoftware, ubicacion: "Monterrey, N.L.", coords: [-100.22, 25.65] },
            P31: { name: "Torre KOI", year: "2017", fase: "Obra", tipologia: "EDIFICACIÓN", disciplinas: "MEP", desafio: "Validación volumetría...", software: stdSoftware, ubicacion: "Monterrey, N.L.", coords: [-100.38, 25.65] },
            C01: { name: "Módulo COVID", year: "2022", fase: "Oficina", tipologia: "SALUD", disciplinas: "MEP", desafio: "Diseño acelerado.", software: stdSoftware, ubicacion: "Cd. Juárez", coords: [-106.42, 31.69] }
        };

        let currentViewMode = 'gallery';
        let isTop5Active = true;
        let sortedProjects = [];
        let tooltipElement;

        function initData() {
            sortedProjects = Object.entries(projectsDB).map(([id, data]) => ({id, ...data}));
            renderProjects(sortedProjects);
            renderD3Map();
            animateValue("hero-stat-projects", 0, sortedProjects.length, 1000);
        }

        function renderProjects(list) {
            const containerList = document.getElementById('proyectos-list-container');
            const containerGallery = document.getElementById('gallery-view-wrapper');

            // LISTA
            containerList.innerHTML = list.map(p => `
                <div class="tech-list-row tech-table-grid">
                    <div class="text-cyan-400 font-bold">P.${p.id}</div>
                    <div><div class="font-bold">${p.name}</div><div class="text-[0.6rem] text-gray-500">${p.ubicacion}</div></div>
                    <div class="text-gray-400">${p.desafio}</div>
                    <div class="text-gray-300 font-normal">${p.fase}</div>
                    <div class="text-gray-400">${p.tipologia}</div>
                    <div class="text-gray-500 uppercase">${p.disciplinas}</div>
                    <div class="text-gray-500 opacity-70">${p.software}</div>
                </div>`).join('');

            // GALERIA (CONFIGURADA PARA TUS CARPETAS CON ESPACIO)
            containerGallery.innerHTML = list.map(p => {
                // RUTA AUTOMÁTICA: img/[ID] [Nombre]/1.jpg
                const rutaImagen = `img/${p.id} ${p.name}/1.jpg`;

                return `
                <div class="gallery-card group relative bg-gray-800" 
                     style="background-image: url('${rutaImagen}'); background-size: cover; background-position: center;"
                     onclick="alert('Expandir proyecto: ${p.name}')">
                    
                    <div class="absolute inset-0 bg-gray-900/50 flex items-center justify-center pointer-events-none z-0">
                         <span class="text-white/10 font-black text-xs tracking-widest z-0">PRÓXIMAMENTE</span>
                    </div>

                    <div class="gallery-overlay z-10">
                        <span class="gallery-id">P.${p.id}</span>
                        <h4 class="gallery-title">${p.name}</h4>
                        <span class="gallery-loc">${p.ubicacion}</span>
                    </div>
                </div>`;
            }).join('');
        }
        
        // MAPA D3 (VERSION SIMPLE)
        function renderD3Map() {
            const container = document.getElementById('d3-map-svg-container'); 
            const w = container.clientWidth; const h = 500;
            const svg = d3.select("#map-svg").attr("width", w).attr("height", h);
            const proj = d3.geoMercator().center([-98, 24]).scale(w * 1.2).translate([w/2, h/2]); 
            const path = d3.geoPath().projection(proj); 
            const g = svg.append("g");

            d3.json("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json").then(data => {
                g.selectAll("path").data(topojson.feature(data, data.objects.countries).features).enter().append("path")
                 .attr("fill", "#1e293b").attr("stroke", "#334155").attr("d", path);

                sortedProjects.forEach(p => {
                    if(p.coords) {
                        g.append("circle")
                         .attr("cx", proj(p.coords)[0])
                         .attr("cy", proj(p.coords)[1])
                         .attr("r", 4)
                         .attr("fill", p.fase === 'Obra' ? '#22c55e' : '#3b82f6')
                         .attr("class", "cursor-pointer hover:r-6 hover:stroke-white");
                    }
                });
            });
        }

        function toggleTop5() {
            isTop5Active = !isTop5Active;
            const btn = document.getElementById('btn-top5');
            btn.classList.toggle('active', isTop5Active);
            const filtered = isTop5Active ? sortedProjects.filter(p => p.isTop) : sortedProjects;
            renderProjects(filtered);
            updateStatusBar();
        }

        function setProjectView(mode) {
            currentViewMode = mode;
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.getElementById('list-view-wrapper').classList.toggle('hidden', mode !== 'list');
            document.getElementById('gallery-view-wrapper').classList.toggle('hidden', mode !== 'gallery');
            document.getElementById('carousel-view-wrapper').classList.toggle('hidden', mode !== 'carousel');
            updateStatusBar();
        }

        function updateStatusBar() {
            const bar = document.getElementById('status-bar-container');
            bar.innerText = `>> ESTADO: ${isTop5Active ? 'TOP 5 DESTACADOS' : 'DB ONLINE'} | VISTA: ${currentViewMode.toUpperCase()}`;
        }
        
        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id); let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        document.addEventListener('DOMContentLoaded', () => { initData(); lucide.createIcons(); });
    </script>
</body>
</html>